"use strict";(self.webpackChunkflexy=self.webpackChunkflexy||[]).push([[5886],{5886:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var o=a(2791),r=a(1889),s=a(2903),i=a(7689),n=a(9347),l=a(4070),c=a(7621),m=a(697),d=a(890),u=a(4721),g=a(9504),p=a(8550),x=a(4518),h=a(184);const f=()=>{const[e,t]=(0,o.useState)({image1:null,image2:null,image3:null,image4:null,image5:null,color:"",stock:""}),{id:a}=(0,i.UO)(),[r,f]=(0,o.useState)(null),[Z,v]=(0,o.useState)("success"),[j,b]=(0,o.useState)(!1),[k,y]=(0,o.useState)([]),[S,C]=(0,o.useState)({color:"",images:""}),[w,N]=(0,o.useState)("single"),P=localStorage.getItem("token");(0,o.useEffect)((()=>{(async()=>{try{const e=await s.Z.get("https://bepocart.in/admin/Bepocart-product-update/".concat(a,"/"),{headers:{Authorization:"".concat(P)}});y(e.data),N(e.data.data.type)}catch(e){console.error("Error fetching data:",e)}})()}),[a,P]);const R=a=>{const{name:o,value:r,files:s}=a.target;t({...e,[o]:s?s[0]:r})},T=()=>{b(!1)};return(0,h.jsxs)("div",{children:[(0,h.jsx)(n.Z,{open:j,autoHideDuration:6e3,onClose:T,children:(0,h.jsx)(l.Z,{onClose:T,severity:Z,sx:{width:"100%"},children:r})}),(0,h.jsxs)(c.Z,{variant:"outlined",sx:{p:0},children:[(0,h.jsx)(m.Z,{sx:{padding:"15px 30px"},display:"flex",alignItems:"center",children:(0,h.jsx)(m.Z,{flexGrow:1,children:(0,h.jsx)(d.Z,{sx:{fontSize:"18px",fontWeight:"500"},children:"Product Form"})})}),(0,h.jsx)(u.Z,{}),(0,h.jsx)(g.Z,{sx:{padding:"30px"},children:(0,h.jsxs)("form",{onSubmit:async o=>{if(o.preventDefault(),!(()=>{const t={};return e.color.trim()||(t.color="Color is required."),e.image1||e.image2||e.image3||e.image4||e.image5||(t.images="At least one image is required."),"single"===w&&(!Number.isInteger(Number(e.stock))||Number(e.stock)<=0)&&(t.stock="Stock must be a positive integer."),C(t),0===Object.keys(t).length})())return;const r=new FormData;r.append("color",e.color),"single"===w&&r.append("stock",e.stock),r.append("image1",e.image1),r.append("image2",e.image2),r.append("image3",e.image3),r.append("image4",e.image4),r.append("image5",e.image5);try{const e=await s.Z.post("https://bepocart.in/admin/Bepocart-Product-image-add/".concat(a,"/"),r,{headers:{"Content-Type":"multipart/form-data",Authorization:"".concat(P)}});f("Form submitted successfully!"),v("success"),b(!0),console.log("Success",e.data),t({image1:null,image2:null,image3:null,image4:null,image5:null,color:"",stock:""})}catch(i){f("Failed to submit the form."),v("error"),b(!0),console.error("Error",i.response?i.response.data:i.message)}},children:[(0,h.jsx)(p.Z,{name:"color",label:"Name / Color / Teeth",variant:"outlined",fullWidth:!0,sx:{mb:2},value:e.color,onChange:R,error:!!S.color,helperText:S.color}),"single"===w&&(0,h.jsx)(p.Z,{name:"stock",label:"Stock",variant:"outlined",fullWidth:!0,sx:{mb:2},value:e.stock,onChange:R,error:!!S.stock,helperText:S.stock}),[1,2,3,4,5].map((t=>{return(0,h.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,h.jsx)(p.Z,{name:"image".concat(t),variant:"outlined",type:"file",fullWidth:!0,sx:{mb:2},onChange:R,error:!!S.images,helperText:1===t?S.images:""}),e["image".concat(t)]&&(0,h.jsxs)(m.Z,{sx:{mb:2},children:[(0,h.jsx)(d.Z,{variant:"body2",children:"Preview:"}),(0,h.jsx)("img",{src:(a=e["image".concat(t)],a?URL.createObjectURL(a):null),alt:"Image ".concat(t," preview"),style:{maxWidth:"100px",height:"auto",marginRight:"10px"}})]})]},"image".concat(t));var a})),(0,h.jsx)(x.Z,{type:"submit",color:"primary",variant:"contained",children:"Submit"})]})})]})]})},Z=()=>(0,h.jsx)(r.ZP,{container:!0,spacing:0,children:(0,h.jsx)(r.ZP,{item:!0,lg:12,md:12,xs:12,children:(0,h.jsx)(f,{})})})},7621:(e,t,a)=>{a.d(t,{Z:()=>f});var o=a(7462),r=a(3366),s=a(2791),i=a(9278),n=a(4419),l=a(6934),c=a(1020),m=a(5527),d=a(5878),u=a(1217);function g(e){return(0,u.ZP)("MuiCard",e)}(0,d.Z)("MuiCard",["root"]);var p=a(184);const x=["className","raised"],h=(0,l.ZP)(m.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),f=s.forwardRef((function(e,t){const a=(0,c.i)({props:e,name:"MuiCard"}),{className:s,raised:l=!1}=a,m=(0,r.Z)(a,x),d=(0,o.Z)({},a,{raised:l}),u=(e=>{const{classes:t}=e;return(0,n.Z)({root:["root"]},g,t)})(d);return(0,p.jsx)(h,(0,o.Z)({className:(0,i.Z)(u.root,s),elevation:l?8:void 0,ref:t,ownerState:d},m))}))}}]);
//# sourceMappingURL=5886.0486beab.chunk.js.map