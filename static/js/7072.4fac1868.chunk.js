"use strict";(self.webpackChunkflexy=self.webpackChunkflexy||[]).push([[7072],{7072:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Z});var r=a(2791),o=a(1889),i=a(2903),n=a(7689),s=a(9347),c=a(4070),l=a(7621),u=a(697),m=a(890),d=a(4721),g=a(9504),p=a(8550),h=a(4518),x=a(184);const f=()=>{const[e,t]=(0,r.useState)({image1:null,image2:null,image3:null,image4:null,image5:null,color:"",stock:"",product:0}),{id:a}=(0,n.UO)(),o=(0,n.TH)(),f=new URLSearchParams(o.search).get("type"),[Z,v]=(0,r.useState)(null),[b,j]=(0,r.useState)("success"),[y,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)({color:"",images:""}),w=localStorage.getItem("token");(0,r.useEffect)((()=>{(async()=>{if(a&&f)try{const e=(await i.Z.get("https://bepocart.in/admin/Bepocart-Product-images-update/".concat(a,"/"),{params:{productType:f},headers:{Authorization:"".concat(w)}})).data.data;t({image1:e.image1||null,image2:e.image2||null,image3:e.image3||null,image4:e.image4||null,image5:e.image5||null,color:e.color||"",stock:"single"===f?e.stock:"",product:e.product||0})}catch(e){console.error("Error fetching product data:",e),v("Failed to fetch product data."),j("error"),k(!0)}})()}),[a,f,w]);const P=a=>{const{name:r,value:o,files:i}=a.target;t({...e,[r]:i?i[0]:o})},T=()=>{k(!1)};return(0,x.jsxs)("div",{children:[(0,x.jsx)(s.Z,{open:y,autoHideDuration:6e3,onClose:T,children:(0,x.jsx)(c.Z,{onClose:T,severity:b,sx:{width:"100%"},children:Z})}),(0,x.jsxs)(l.Z,{variant:"outlined",sx:{p:0},children:[(0,x.jsx)(u.Z,{sx:{padding:"15px 30px"},display:"flex",alignItems:"center",children:(0,x.jsx)(u.Z,{flexGrow:1,children:(0,x.jsx)(m.Z,{sx:{fontSize:"18px",fontWeight:"500"},children:"Product Form"})})}),(0,x.jsx)(d.Z,{}),(0,x.jsx)(g.Z,{sx:{padding:"30px"},children:(0,x.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),!(()=>{const t={};return e.color.trim()||(t.color="Color is required."),e.image1||e.image2||e.image3||e.image4||e.image5||(t.images="At least one image is required."),"single"===f&&(!Number.isInteger(Number(e.stock))||Number(e.stock)<=0)&&(t.stock="Stock must be a positive integer."),S(t),0===Object.keys(t).length})())return;const o=new FormData;o.append("color",e.color),o.append("productType",f),o.append("product",e.product.toString()),"single"===f&&o.append("stock",e.stock);for(let t=1;t<=5;t++){const a=e["image".concat(t)];a instanceof Blob&&o.append("image".concat(t),a,a.name)}try{await i.Z.put("https://bepocart.in/admin/Bepocart-Product-images-update/".concat(a,"/"),o,{headers:{"Content-Type":"multipart/form-data",Authorization:"".concat(w)}}),v("Form submitted successfully!"),j("success"),k(!0),t({image1:null,image2:null,image3:null,image4:null,image5:null,color:"",stock:"",product:0})}catch(n){console.error("Error submitting form:",n),v("Failed to submit the form."),j("error"),k(!0)}},encType:"multipart/form-data",children:[(0,x.jsx)(p.Z,{name:"color",label:"Name / Color / Teeth",variant:"outlined",fullWidth:!0,sx:{mb:2},value:e.color,onChange:P,error:!!C.color,helperText:C.color}),"single"===f&&(0,x.jsx)(p.Z,{name:"stock",label:"Stock",variant:"outlined",fullWidth:!0,sx:{mb:2},value:e.stock,onChange:P,error:!!C.stock,helperText:C.stock}),[1,2,3,4,5].map((t=>{return(0,x.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,x.jsx)(p.Z,{name:"image".concat(t),variant:"outlined",type:"file",fullWidth:!0,sx:{mb:2},onChange:P,error:!!C.images,helperText:1===t?C.images:"",inputProps:{accept:"image/*"}}),e["image".concat(t)]&&(0,x.jsxs)(u.Z,{sx:{mb:2},children:[(0,x.jsx)(m.Z,{variant:"body2",children:"Preview:"}),(0,x.jsx)("img",{src:(a=e["image".concat(t)],a?"string"===typeof a?a:URL.createObjectURL(a):null),alt:"Image ".concat(t," preview"),style:{maxWidth:"100px",height:"auto",marginRight:"10px"}})]})]},"image".concat(t));var a})),(0,x.jsx)(h.Z,{type:"submit",color:"primary",variant:"contained",children:"Submit"})]})})]})]})},Z=()=>(0,x.jsx)(o.ZP,{container:!0,spacing:0,children:(0,x.jsx)(o.ZP,{item:!0,lg:12,md:12,xs:12,children:(0,x.jsx)(f,{})})})},7621:(e,t,a)=>{a.d(t,{Z:()=>f});var r=a(7462),o=a(3366),i=a(2791),n=a(9278),s=a(4419),c=a(6934),l=a(1020),u=a(5527),m=a(5878),d=a(1217);function g(e){return(0,d.ZP)("MuiCard",e)}(0,m.Z)("MuiCard",["root"]);var p=a(184);const h=["className","raised"],x=(0,c.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({overflow:"hidden"}))),f=i.forwardRef((function(e,t){const a=(0,l.i)({props:e,name:"MuiCard"}),{className:i,raised:c=!1}=a,u=(0,o.Z)(a,h),m=(0,r.Z)({},a,{raised:c}),d=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"]},g,t)})(m);return(0,p.jsx)(x,(0,r.Z)({className:(0,n.Z)(d.root,i),elevation:c?8:void 0,ref:t,ownerState:m},u))}))}}]);
//# sourceMappingURL=7072.4fac1868.chunk.js.map