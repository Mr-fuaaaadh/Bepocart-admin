"use strict";(self.webpackChunkflexy=self.webpackChunkflexy||[]).push([[3472],{3472:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var n=a(2791),s=a(1889),o=a(2903),i=a(9347),r=a(4070),c=a(7621),d=a(697),l=a(890),u=a(4721),p=a(9504),m=a(8550),x=a(8096),h=a(4925),v=a(8406),Z=a(7196),b=a(3786),g=a(1918),y=a(4518),f=a(184);const j=()=>{const[e,t]=(0,n.useState)({code:"",coupon_type:"",discount:"",start_date:"",end_date:"",status:"",max_uses:"",used_count:"",discount_product:[],discount_category:[]}),[a,j]=(0,n.useState)([]),[C,_]=(0,n.useState)([]),[I,P]=(0,n.useState)(!1),[S,w]=(0,n.useState)(""),[k,O]=(0,n.useState)("success");(0,n.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await o.Z.get("https://bepocart.in/admin/Bepocart-products/",{headers:{Authorization:"".concat(e)}});j(t.data.data);const a=await o.Z.get("https://bepocart.in/admin/Bepocart-subcategories/",{headers:{Authorization:"".concat(e)}});_(a.data.data)}catch(e){console.error("Error fetching data",e),O("error"),w("Failed to fetch products or categories."),P(!0)}})()}),[]);const W=(e,t)=>{"clickaway"!==t&&P(!1)},M=a=>{const{name:n,value:s}=a.target;t({...e,[n]:s})},D=(a,n)=>{const{target:{value:s}}=a;t({...e,[n]:s})};return(0,f.jsxs)("div",{children:[(0,f.jsx)(i.Z,{open:I,autoHideDuration:6e3,onClose:W,children:(0,f.jsx)(r.Z,{onClose:W,severity:k,sx:{width:"100%"},children:S})}),(0,f.jsxs)(c.Z,{variant:"outlined",sx:{p:0},children:[(0,f.jsx)(d.Z,{sx:{padding:"15px 30px"},display:"flex",alignItems:"center",children:(0,f.jsx)(d.Z,{flexGrow:1,children:(0,f.jsx)(l.Z,{sx:{fontSize:"18px",fontWeight:"500"},children:"Coupon Form"})})}),(0,f.jsx)(u.Z,{}),(0,f.jsx)(p.Z,{sx:{padding:"30px"},children:(0,f.jsx)("form",{onSubmit:async a=>{a.preventDefault();try{const a=localStorage.getItem("token"),n={...e,start_date:new Date(e.start_date).toISOString(),end_date:new Date(e.end_date).toISOString()},s=await o.Z.post("https://bepocart.in/admin/Bepocart-promotion-coupen/",n,{headers:{Authorization:"".concat(a)}});console.log("Coupon created successfully:",s.data),O("success"),w("Coupon created successfully"),P(!0),t({code:"",coupon_type:"",discount:"",start_date:"",end_date:"",status:"",max_uses:"",used_count:"",discount_product:[],discount_category:[]})}catch(n){console.error("Error creating coupon:",n),O("error"),w("Failed to create coupon"),P(!0)}},children:(0,f.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,f.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{name:"code",label:"Code",variant:"outlined",fullWidth:!0,value:e.code,onChange:M,sx:{mb:2}})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsxs)(x.Z,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[(0,f.jsx)(h.Z,{id:"coupon-type-label",children:"Coupon Type"}),(0,f.jsxs)(v.Z,{labelId:"coupon-type-label",id:"coupon_type",name:"coupon_type",value:e.coupon_type,onChange:M,input:(0,f.jsx)(Z.Z,{label:"Coupon Type"}),children:[(0,f.jsx)(b.Z,{value:"Percentage",children:"Percentage"}),(0,f.jsx)(b.Z,{value:"Fixed Amount",children:"Fixed Amount"})]})]})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{name:"discount",label:"Discount",variant:"outlined",fullWidth:!0,value:e.discount,onChange:M,sx:{mb:2}})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{name:"start_date",label:"Start Date",type:"datetime-local",variant:"outlined",fullWidth:!0,value:e.start_date,onChange:M,sx:{mb:2},InputLabelProps:{shrink:!0},inputProps:{step:300}})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{name:"end_date",label:"End Date",type:"datetime-local",variant:"outlined",fullWidth:!0,value:e.end_date,onChange:M,sx:{mb:2},InputLabelProps:{shrink:!0},inputProps:{step:300}})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsxs)(x.Z,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[(0,f.jsx)(h.Z,{id:"status-label",children:"Status"}),(0,f.jsxs)(v.Z,{labelId:"status-label",id:"status",name:"status",value:e.status,onChange:M,input:(0,f.jsx)(Z.Z,{label:"Status"}),children:[(0,f.jsx)(b.Z,{value:"Active",children:"Active"}),(0,f.jsx)(b.Z,{value:"Inactive",children:"Inactive"})]})]})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{name:"max_uses",label:"Max Uses",variant:"outlined",fullWidth:!0,value:e.max_uses,onChange:M,sx:{mb:2}})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,children:(0,f.jsx)(m.Z,{name:"used_count",label:"Used Count",variant:"outlined",fullWidth:!0,value:e.used_count,onChange:M,sx:{mb:2},type:"number"})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,children:(0,f.jsxs)(x.Z,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[(0,f.jsx)(h.Z,{id:"discount-product-label",children:"Discount Product"}),(0,f.jsx)(v.Z,{labelId:"discount-product-label",id:"discount_product",multiple:!0,value:e.discount_product,onChange:e=>D(e,"discount_product"),input:(0,f.jsx)(Z.Z,{label:"Discount Product"}),renderValue:e=>(0,f.jsx)(d.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var t;return(0,f.jsx)(g.Z,{label:(null===(t=a.find((t=>t.id===e)))||void 0===t?void 0:t.name)||e},e)}))}),children:a.map((e=>(0,f.jsx)(b.Z,{value:e.id,children:e.name},e.id)))})]})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,children:(0,f.jsxs)(x.Z,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[(0,f.jsx)(h.Z,{id:"discount-category-label",children:"Discount Category"}),(0,f.jsx)(v.Z,{labelId:"discount-category-label",id:"discount_category",multiple:!0,value:e.discount_category,onChange:e=>D(e,"discount_category"),input:(0,f.jsx)(Z.Z,{label:"Discount Category"}),renderValue:e=>(0,f.jsx)(d.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var t;return(0,f.jsx)(g.Z,{label:(null===(t=C.find((t=>t.id===e)))||void 0===t?void 0:t.name)||e},e)}))}),children:C.map((e=>(0,f.jsx)(b.Z,{value:e.id,children:e.name},e.id)))})]})}),(0,f.jsx)(s.ZP,{item:!0,xs:12,children:(0,f.jsx)(y.Z,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Create Coupon"})})]})})})]})]})},C=()=>(0,f.jsx)(s.ZP,{container:!0,spacing:0,children:(0,f.jsx)(s.ZP,{item:!0,lg:12,md:12,xs:12,children:(0,f.jsx)(j,{})})})},6014:(e,t,a)=>{a.d(t,{Z:()=>i,f:()=>o});var n=a(5878),s=a(1217);function o(e){return(0,s.ZP)("MuiListItemIcon",e)}const i=(0,n.Z)("MuiListItemIcon",["root","alignItemsFlexStart"])},9849:(e,t,a)=>{a.d(t,{L:()=>o,Z:()=>i});var n=a(5878),s=a(1217);function o(e){return(0,s.ZP)("MuiListItemText",e)}const i=(0,n.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},3786:(e,t,a)=>{a.d(t,{Z:()=>P});var n=a(3366),s=a(7462),o=a(2791),i=a(9278),r=a(4419),c=a(4131),d=a(6934),l=a(5070),u=a(1020),p=a(6199),m=a(533),x=a(162),h=a(2071),v=a(133),Z=a(6014),b=a(9849),g=a(5878),y=a(1217);function f(e){return(0,y.ZP)("MuiMenuItem",e)}const j=(0,g.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var C=a(184);const _=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],I=(0,d.ZP)(m.Z,{shouldForwardProp:e=>(0,l.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:a}=e;return(0,s.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(j.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(j.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,c.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(j.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,c.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,c.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(j.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(j.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(v.Z.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(v.Z.inset)]:{marginLeft:52},["& .".concat(b.Z.root)]:{marginTop:0,marginBottom:0},["& .".concat(b.Z.inset)]:{paddingLeft:36},["& .".concat(Z.Z.root)]:{minWidth:36}},!a.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&(0,s.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(Z.Z.root," svg")]:{fontSize:"1.25rem"}}))})),P=o.forwardRef((function(e,t){const a=(0,u.i)({props:e,name:"MuiMenuItem"}),{autoFocus:c=!1,component:d="li",dense:l=!1,divider:m=!1,disableGutters:v=!1,focusVisibleClassName:Z,role:b="menuitem",tabIndex:g,className:y}=a,j=(0,n.Z)(a,_),P=o.useContext(p.Z),S=o.useMemo((()=>({dense:l||P.dense||!1,disableGutters:v})),[P.dense,l,v]),w=o.useRef(null);(0,x.Z)((()=>{c&&w.current&&w.current.focus()}),[c]);const k=(0,s.Z)({},a,{dense:S.dense,divider:m,disableGutters:v}),O=(e=>{const{disabled:t,dense:a,divider:n,disableGutters:o,selected:i,classes:c}=e,d={root:["root",a&&"dense",t&&"disabled",!o&&"gutters",n&&"divider",i&&"selected"]},l=(0,r.Z)(d,f,c);return(0,s.Z)({},c,l)})(a),W=(0,h.Z)(w,t);let M;return a.disabled||(M=void 0!==g?g:-1),(0,C.jsx)(p.Z.Provider,{value:S,children:(0,C.jsx)(I,(0,s.Z)({ref:W,role:b,tabIndex:M,component:d,focusVisibleClassName:(0,i.Z)(O.focusVisible,Z),className:(0,i.Z)(O.root,y)},j,{ownerState:k,classes:O}))})}))}}]);
//# sourceMappingURL=3472.5b00d2f8.chunk.js.map