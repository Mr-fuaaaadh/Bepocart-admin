"use strict";(self.webpackChunkflexy=self.webpackChunkflexy||[]).push([[9331],{9331:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var n=a(2791),o=a(1889),s=a(2903),i=a(7689),c=a(7621),r=a(697),d=a(890),l=a(4721),u=a(9504),p=a(8550),m=a(8096),x=a(4925),h=a(8406),g=a(7196),v=a(3786),b=a(1918),Z=a(4518),y=a(9347),f=a(4070),j=a(184);const C=()=>{const{id:e}=(0,i.UO)(),[t,a]=(0,n.useState)({code:"",coupon_type:"Percentage",discount:"",start_date:"",end_date:"",status:"Active",max_uses:"",used_count:0,discount_product:[],discount_category:[]}),[C,_]=(0,n.useState)([]),[P,I]=(0,n.useState)([]),[S,k]=(0,n.useState)(!1);(0,n.useEffect)((()=>{e&&w(),M(),O()}),[e]);const w=async()=>{try{const t=localStorage.getItem("token"),n=(await s.Z.get("https://bepocart.in/admin/Bepocart-promotion-coupen-update/".concat(e,"/"),{headers:{Authorization:"".concat(t)}})).data.data;console.log("Coupon Data:",n),n?a({code:n.code||"",coupon_type:n.coupon_type||"Percentage",discount:n.discount||"",start_date:n.start_date||"",end_date:n.end_date||"",status:n.status||"Active",max_uses:n.max_uses||"",used_count:n.used_count||0,discount_product:n.discount_product||[],discount_category:n.discount_category||[]}):console.error("Empty or undefined coupon data received.")}catch(t){console.error("Error fetching coupon details:",t)}},M=async()=>{try{const e=localStorage.getItem("token"),t=await s.Z.get("https://bepocart.in/admin/Bepocart-products/",{headers:{Authorization:"".concat(e)}});_(t.data.data)}catch(e){console.error("Error fetching products:",e)}},O=async()=>{try{const e=localStorage.getItem("token"),t=await s.Z.get("https://bepocart.in/admin/Bepocart-subcategories/",{headers:{Authorization:"".concat(e)}});I(t.data.data)}catch(e){console.error("Error fetching categories:",e)}},W=e=>{const{name:n,value:o}=e.target;a({...t,[n]:o})},D=(e,n)=>{const{value:o}=e.target;a({...t,[n]:o})},A=()=>{k(!1)};return(0,j.jsxs)("div",{children:[(0,j.jsxs)(c.Z,{variant:"outlined",sx:{p:0},children:[(0,j.jsx)(r.Z,{sx:{padding:"15px 30px"},display:"flex",alignItems:"center",children:(0,j.jsx)(r.Z,{flexGrow:1,children:(0,j.jsx)(d.Z,{sx:{fontSize:"18px",fontWeight:"500"},children:"Update Coupon"})})}),(0,j.jsx)(l.Z,{}),(0,j.jsx)(u.Z,{sx:{padding:"30px"},children:(0,j.jsx)("form",{onSubmit:async a=>{a.preventDefault();try{const a=localStorage.getItem("token");console.log("Submitting form data:",t),await s.Z.put("https://bepocart.in/admin/Bepocart-promotion-coupen-update/".concat(e,"/"),t,{headers:{Authorization:"".concat(a)}}),console.log("Coupon updated successfully:",t),k(!0)}catch(n){console.error("Error updating coupon:",n),n.response&&console.error("Response data:",n.response.data)}console.log("Product:",t.discount_product),console.log("Category:",t.discount_category)},children:(0,j.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,j.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsx)(p.Z,{name:"code",label:"Code",variant:"outlined",fullWidth:!0,value:t.code,onChange:W,sx:{mb:2}})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsxs)(m.Z,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[(0,j.jsx)(x.Z,{id:"coupon-type-label",children:"Coupon Type"}),(0,j.jsxs)(h.Z,{labelId:"coupon-type-label",id:"coupon_type",name:"coupon_type",value:t.coupon_type,onChange:W,input:(0,j.jsx)(g.Z,{label:"Coupon Type"}),children:[(0,j.jsx)(v.Z,{value:"Percentage",children:"Percentage"}),(0,j.jsx)(v.Z,{value:"Fixed Amount",children:"Fixed Amount"})]})]})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsx)(p.Z,{name:"discount",label:"Discount",variant:"outlined",fullWidth:!0,value:t.discount,onChange:W,sx:{mb:2}})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsx)(p.Z,{name:"start_date",label:"Start Date",type:"datetime-local",variant:"outlined",fullWidth:!0,value:t.start_date,onChange:W,sx:{mb:2},InputLabelProps:{shrink:!0},inputProps:{step:300}})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsx)(p.Z,{name:"end_date",label:"End Date",type:"datetime-local",variant:"outlined",fullWidth:!0,value:t.end_date,onChange:W,sx:{mb:2},InputLabelProps:{shrink:!0},inputProps:{step:300}})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsxs)(m.Z,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[(0,j.jsx)(x.Z,{id:"status-label",children:"Status"}),(0,j.jsxs)(h.Z,{labelId:"status-label",id:"status",name:"status",value:t.status,onChange:W,input:(0,j.jsx)(g.Z,{label:"Status"}),children:[(0,j.jsx)(v.Z,{value:"Active",children:"Active"}),(0,j.jsx)(v.Z,{value:"Inactive",children:"Inactive"})]})]})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:(0,j.jsx)(p.Z,{name:"max_uses",label:"Max Uses",variant:"outlined",fullWidth:!0,value:t.max_uses,onChange:W,sx:{mb:2}})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,children:(0,j.jsx)(p.Z,{name:"used_count",label:"Used Count",variant:"outlined",fullWidth:!0,value:t.used_count,onChange:W,sx:{mb:2},type:"number"})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,children:(0,j.jsxs)(m.Z,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[(0,j.jsx)(x.Z,{id:"discount-product-label",children:"Discount Product"}),(0,j.jsx)(h.Z,{labelId:"discount-product-label",id:"discount_product",name:"discount_product",multiple:!0,value:t.discount_product,onChange:e=>D(e,"discount_product"),input:(0,j.jsx)(g.Z,{id:"select-multiple-chip",label:"Discount Product"}),renderValue:e=>(0,j.jsx)(r.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var t;return(0,j.jsx)(b.Z,{label:null===(t=C.find((t=>t.id===e)))||void 0===t?void 0:t.name},e)}))}),children:C.map((e=>(0,j.jsx)(v.Z,{value:e.id,children:e.name},e.id)))})]})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,children:(0,j.jsxs)(m.Z,{fullWidth:!0,variant:"outlined",sx:{mb:2},children:[(0,j.jsx)(x.Z,{id:"discount-category-label",children:"Discount Category"}),(0,j.jsx)(h.Z,{labelId:"discount-category-label",id:"discount_category",name:"discount_category",multiple:!0,value:t.discount_category,onChange:e=>D(e,"discount_category"),input:(0,j.jsx)(g.Z,{id:"select-multiple-chip",label:"Discount Category"}),renderValue:e=>(0,j.jsx)(r.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{var t;return(0,j.jsx)(b.Z,{label:null===(t=P.find((t=>t.id===e)))||void 0===t?void 0:t.name},e)}))}),children:P.map((e=>(0,j.jsx)(v.Z,{value:e.id,children:e.name},e.id)))})]})}),(0,j.jsx)(o.ZP,{item:!0,xs:12,children:(0,j.jsx)(Z.Z,{type:"submit",variant:"contained",color:"primary",children:"Update Coupon"})})]})})})]}),(0,j.jsx)(y.Z,{open:S,autoHideDuration:6e3,onClose:A,children:(0,j.jsx)(f.Z,{onClose:A,severity:"success",sx:{width:"100%"},children:"Coupon updated successfully!"})})]})},_=()=>(0,j.jsx)(o.ZP,{container:!0,spacing:0,children:(0,j.jsx)(o.ZP,{item:!0,lg:12,md:12,xs:12,children:(0,j.jsx)(C,{})})})},6014:(e,t,a)=>{a.d(t,{Z:()=>i,f:()=>s});var n=a(5878),o=a(1217);function s(e){return(0,o.ZP)("MuiListItemIcon",e)}const i=(0,n.Z)("MuiListItemIcon",["root","alignItemsFlexStart"])},9849:(e,t,a)=>{a.d(t,{L:()=>s,Z:()=>i});var n=a(5878),o=a(1217);function s(e){return(0,o.ZP)("MuiListItemText",e)}const i=(0,n.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},3786:(e,t,a)=>{a.d(t,{Z:()=>I});var n=a(3366),o=a(7462),s=a(2791),i=a(9278),c=a(4419),r=a(4131),d=a(6934),l=a(5070),u=a(1020),p=a(6199),m=a(533),x=a(162),h=a(2071),g=a(133),v=a(6014),b=a(9849),Z=a(5878),y=a(1217);function f(e){return(0,y.ZP)("MuiMenuItem",e)}const j=(0,Z.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var C=a(184);const _=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],P=(0,d.ZP)(m.Z,{shouldForwardProp:e=>(0,l.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((e=>{let{theme:t,ownerState:a}=e;return(0,o.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!a.disableGutters&&{paddingLeft:16,paddingRight:16},a.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(j.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,r.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(j.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,r.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(j.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,r.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,r.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(j.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(j.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(g.Z.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(g.Z.inset)]:{marginLeft:52},["& .".concat(b.Z.root)]:{marginTop:0,marginBottom:0},["& .".concat(b.Z.inset)]:{paddingLeft:36},["& .".concat(v.Z.root)]:{minWidth:36}},!a.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},a.dense&&(0,o.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(v.Z.root," svg")]:{fontSize:"1.25rem"}}))})),I=s.forwardRef((function(e,t){const a=(0,u.i)({props:e,name:"MuiMenuItem"}),{autoFocus:r=!1,component:d="li",dense:l=!1,divider:m=!1,disableGutters:g=!1,focusVisibleClassName:v,role:b="menuitem",tabIndex:Z,className:y}=a,j=(0,n.Z)(a,_),I=s.useContext(p.Z),S=s.useMemo((()=>({dense:l||I.dense||!1,disableGutters:g})),[I.dense,l,g]),k=s.useRef(null);(0,x.Z)((()=>{r&&k.current&&k.current.focus()}),[r]);const w=(0,o.Z)({},a,{dense:S.dense,divider:m,disableGutters:g}),M=(e=>{const{disabled:t,dense:a,divider:n,disableGutters:s,selected:i,classes:r}=e,d={root:["root",a&&"dense",t&&"disabled",!s&&"gutters",n&&"divider",i&&"selected"]},l=(0,c.Z)(d,f,r);return(0,o.Z)({},r,l)})(a),O=(0,h.Z)(k,t);let W;return a.disabled||(W=void 0!==Z?Z:-1),(0,C.jsx)(p.Z.Provider,{value:S,children:(0,C.jsx)(P,(0,o.Z)({ref:O,role:b,tabIndex:W,component:d,focusVisibleClassName:(0,i.Z)(M.focusVisible,v),className:(0,i.Z)(M.root,y)},j,{ownerState:w,classes:M}))})}))}}]);
//# sourceMappingURL=9331.a776b8de.chunk.js.map